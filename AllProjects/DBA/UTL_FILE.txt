LInk
http://docstore.mik.ua/orelly/oracle/bipack/ch06_02.htm
----------------

Code for reading the files

spool /tmp/EAMS_PUBLISH_PKG_STAT_UPD.lst;

Prompt --Prerequisite
Prompt --set the UTL_FILE_DIR path AS /home/oracle in the init.ora file
Prompt--'PACKAGE_ID.TXT' FILE should be placed in the directory /home/oracle' where the oracle server resides


Prompt --Creating the PLSQL table
CREATE OR REPLACE PACKAGE tabpkg 
IS
   TYPE names_tabtype IS TABLE OF number
      INDEX BY BINARY_INTEGER;
END;
/

Prompt --Reading the Package Id and Updating EAMS_PUBLISH_PACKAGE and EAMS_PUBLISH_ASSET tables

CREATE OR REPLACE PROCEDURE UTL_FILE_TEST_READ_PRC(
  PATH       IN VARCHAR2,
  FILENAME   IN VARCHAR2,
  TABLE_IN IN OUT TABPKG.NAMES_TABTYPE) AS 

  INPUT_FILE   UTL_FILE.FILE_TYPE;
  INPUT_BUFFER VARCHAR2(4000);
  LINE_COUNTER INTEGER := 1;
  V_STATUS VARCHAR2(30);
  V_WORKFLOW_TRANS_ID VARCHAR2(4000);
BEGIN
   INPUT_FILE := UTL_FILE.FOPEN (PATH,FILENAME, 'R');
    LOOP
        UTL_FILE.GET_LINE (INPUT_FILE, TABLE_IN(LINE_COUNTER));
       -- DBMS_OUTPUT.PUT_LINE(TABLE_IN(LINE_COUNTER));
		SELECT STATUS 
		INTO   V_STATUS
		FROM  EAMS_PUBLISH_PACKAGE
		WHERE PUBLISH_ID=TABLE_IN(LINE_COUNTER);
		
		IF V_STATUS='PUBLISH_PROGRESS' THEN

			UPDATE EAMS_PUBLISH_PACKAGE
			SET STATUS='PUBLISHED'
			WHERE PUBLISH_ID=TABLE_IN(LINE_COUNTER);

			UPDATE EAMS_PUBLISH_ASSET
			SET STATUS='PUBLISHED'
			WHERE PUBLISH_ID=TABLE_IN(LINE_COUNTER);
			
			SELECT OPERATION_ID
			INTO V_WORKFLOW_TRANS_ID
			FROM EAMS_PUBLISH_PACKAGE
			WHERE PUBLISH_ID=TABLE_IN(LINE_COUNTER);
			 
			UPDATE EAMS_WORKFLOW_TRANS
			SET    STATUS='COMPLETED'
			WHERE  WORKFLOW_TRANS_ID=V_WORKFLOW_TRANS_ID;	
						
		COMMIT;
		END IF;
	LINE_COUNTER := LINE_COUNTER + 1;
    END LOOP;
 
  EXCEPTION
 WHEN OTHERS THEN
   UTL_FILE.FCLOSE(INPUT_FILE);
END UTL_FILE_TEST_READ_PRC;
/
spool off;
